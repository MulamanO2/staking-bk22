document.writeln("import {");
document.writeln("  ThirdwebNftMedia,");
document.writeln("  useAddress,");
document.writeln("  useMetamask,");
document.writeln("  useNFTDrop,");
document.writeln("  useToken,");
document.writeln("  useTokenBalance,");
document.writeln("  useOwnedNFTs,");
document.writeln("  useContract,");
document.writeln("} from \"@thirdweb-dev/react\";");
document.writeln("import { BigNumber, ethers } from \"ethers\";");
document.writeln("import type { NextPage } from \"next\";");
document.writeln("import { useEffect, useState } from \"react\";");
document.writeln("import styles from \"../styles/Home.module.css\";");
document.writeln("");
document.writeln("const nftDropContractAddress = \"0xF628278364CE3613674D6bf85F8580eEa3b1Cd8c\";");
document.writeln("const tokenContractAddress = \"0x3304bA142B00BC3aED7d2946eFb9B584089245Ae\";");
document.writeln("const stakingContractAddress = \"0x65bD2f52CB40082625108a48cA8Fc5ef18D96356\";");
document.writeln("");
document.writeln("const Stake: NextPage = () => {");
document.writeln("  // Wallet Connection Hooks");
document.writeln("  const address = useAddress();");
document.writeln("  const connectWithMetamask = useMetamask();");
document.writeln("");
document.writeln("  // Contract Hooks");
document.writeln("  const nftDropContract = useNFTDrop(nftDropContractAddress);");
document.writeln("  const tokenContract = useToken(tokenContractAddress);");
document.writeln("");
document.writeln("  const { contract, isLoading } = useContract(stakingContractAddress);");
document.writeln("");
document.writeln("  // Load Unstaked NFTs");
document.writeln("  const { data: ownedNfts } = useOwnedNFTs(nftDropContract, address);");
document.writeln("");
document.writeln("  // Load Balance of Token");
document.writeln("  const { data: tokenBalance } = useTokenBalance(tokenContract, address);");
document.writeln("");
document.writeln("  ///////////////////////////////////////////////////////////////////////////");
document.writeln("  // Custom contract functions");
document.writeln("  ///////////////////////////////////////////////////////////////////////////");
document.writeln("  const [stakedNfts, setStakedNfts] = useState<any[]>([]);");
document.writeln("  const [claimableRewards, setClaimableRewards] = useState<BigNumber>();");
document.writeln("");
document.writeln("  useEffect(() => {");
document.writeln("    if (!contract) return;");
document.writeln("");
document.writeln("    async function loadStakedNfts() {");
document.writeln("      const stakedTokens = await contract?.call(\"getStakedTokens\", address);");
document.writeln("");
document.writeln("      // For each staked token, fetch it from the sdk");
document.writeln("      const stakedNfts = await Promise.all(");
document.writeln("        stakedTokens?.map(");
document.writeln("          async (stakedToken: { staker: string; tokenId: BigNumber }) => {");
document.writeln("            const nft = await nftDropContract?.get(stakedToken.tokenId);");
document.writeln("            return nft;");
document.writeln("          }");
document.writeln("        )");
document.writeln("      );");
document.writeln("");
document.writeln("      setStakedNfts(stakedNfts);");
document.writeln("      console.log(\"setStakedNfts\", stakedNfts);");
document.writeln("    }");
document.writeln("");
document.writeln("    if (address) {");
document.writeln("      loadStakedNfts();");
document.writeln("    }");
document.writeln("  }, [address, contract, nftDropContract]);");
document.writeln("");
document.writeln("  useEffect(() => {");
document.writeln("    if (!contract || !address) return;");
document.writeln("");
document.writeln("    async function loadClaimableRewards() {");
document.writeln("      const cr = await contract?.call(\"availableRewards\", address);");
document.writeln("      console.log(\"Loaded claimable rewards\", cr);");
document.writeln("      setClaimableRewards(cr);");
document.writeln("    }");
document.writeln("");
document.writeln("    loadClaimableRewards();");
document.writeln("  }, [address, contract]);");
document.writeln("");
document.writeln("  ///////////////////////////////////////////////////////////////////////////");
document.writeln("  // Write Functions");
document.writeln("  ///////////////////////////////////////////////////////////////////////////");
document.writeln("  async function stakeNft(id: BigNumber) {");
document.writeln("    if (!address) return;");
document.writeln("");
document.writeln("    const isApproved = await nftDropContract?.isApproved(");
document.writeln("      address,");
document.writeln("      stakingContractAddress");
document.writeln("    );");
document.writeln("    // If not approved, request approval");
document.writeln("    if (!isApproved) {");
document.writeln("      await nftDropContract?.setApprovalForAll(stakingContractAddress, true);");
document.writeln("    }");
document.writeln("    const stake = await contract?.call(\"stake\", id);");
document.writeln("  }");
document.writeln("");
document.writeln("  async function withdraw(id: BigNumber) {");
document.writeln("    const withdraw = await contract?.call(\"withdraw\", id);");
document.writeln("  }");
document.writeln("");
document.writeln("  async function claimRewards() {");
document.writeln("    const claim = await contract?.call(\"claimRewards\");");
document.writeln("  }");
document.writeln("");
document.writeln("  if (isLoading) {");
document.writeln("    return <div>Loading</div>;");
document.writeln("  }");
document.writeln("");
document.writeln("  return (");
document.writeln("    <div className={styles.container}>");
document.writeln("      <h1 className={styles.h1}>Stake Your Bored Kitty NFT\'s</h1>");
document.writeln("");
document.writeln("      <hr className={`${styles.divider} ${styles.spacerTop}`} />");
document.writeln("");
document.writeln("      {!address ? (");
document.writeln("        <button className={styles.mainButton} onClick={connectWithMetamask}>");
document.writeln("          Connect Wallet");
document.writeln("        </button>");
document.writeln("      ) : (");
document.writeln("        <>");
document.writeln("          <h2>Your BK22 Tokens</h2>");
document.writeln("");
document.writeln("          <div className={styles.tokenGrid}>");
document.writeln("            <div className={styles.tokenItem}>");
document.writeln("              <h3 className={styles.tokenLabel}>Claimable Rewards</h3>");
document.writeln("              <p className={styles.tokenValue}>");
document.writeln("                <b>");
document.writeln("                  {!claimableRewards");
document.writeln("                    ? \"Loading...\"");
document.writeln("                    : ethers.utils.formatUnits(claimableRewards, 18)}");
document.writeln("                </b>{\" \"}");
document.writeln("                {tokenBalance?.symbol}");
document.writeln("              </p>");
document.writeln("            </div>");
document.writeln("            <div className={styles.tokenItem}>");
document.writeln("              <h3 className={styles.tokenLabel}>Current Balance</h3>");
document.writeln("              <p className={styles.tokenValue}>");
document.writeln("                <b>{tokenBalance?.displayValue}</b> {tokenBalance?.symbol}");
document.writeln("              </p>");
document.writeln("            </div>");
document.writeln("          </div>");
document.writeln("");
document.writeln("          <button");
document.writeln("            className={`${styles.mainButton} ${styles.spacerTop}`}");
document.writeln("            onClick={() => claimRewards()}");
document.writeln("          >");
document.writeln("            Claim Rewards");
document.writeln("          </button>");
document.writeln("");
document.writeln("          <hr className={`${styles.divider} ${styles.spacerTop}`} />");
document.writeln("");
document.writeln("          <h2>Your Staked NFTs</h2>");
document.writeln("          <div className={styles.nftBoxGrid}>");
document.writeln("            {stakedNfts?.map((nft) => (");
document.writeln("              <div className={styles.nftBox} key={nft.metadata.id.toString()}>");
document.writeln("                <ThirdwebNftMedia");
document.writeln("                  metadata={nft.metadata}");
document.writeln("                  className={styles.nftMedia}");
document.writeln("                />");
document.writeln("                <h3>{nft.metadata.name}</h3>");
document.writeln("                <button");
document.writeln("                  className={`${styles.mainButton} ${styles.spacerBottom}`}");
document.writeln("                  onClick={() => withdraw(nft.metadata.id)}");
document.writeln("                >");
document.writeln("                  Withdraw");
document.writeln("                </button>");
document.writeln("              </div>");
document.writeln("            ))}");
document.writeln("          </div>");
document.writeln("");
document.writeln("          <hr className={`${styles.divider} ${styles.spacerTop}`} />");
document.writeln("");
document.writeln("          <h2>Your Unstaked NFTs</h2>");
document.writeln("");
document.writeln("          <div className={styles.nftBoxGrid}>");
document.writeln("            {ownedNfts?.map((nft) => (");
document.writeln("              <div className={styles.nftBox} key={nft.metadata.id.toString()}>");
document.writeln("                <ThirdwebNftMedia");
document.writeln("                  metadata={nft.metadata}");
document.writeln("                  className={styles.nftMedia}");
document.writeln("                />");
document.writeln("                <h3>{nft.metadata.name}</h3>");
document.writeln("                <button");
document.writeln("                  className={`${styles.mainButton} ${styles.spacerBottom}`}");
document.writeln("                  onClick={() => stakeNft(nft.metadata.id)}");
document.writeln("                >");
document.writeln("                  Stake");
document.writeln("                </button>");
document.writeln("              </div>");
document.writeln("            ))}");
document.writeln("          </div>");
document.writeln("        </>");
document.writeln("      )}");
document.writeln("    </div>");
document.writeln("  );");
document.writeln("};");
document.writeln("");
document.writeln("export default Stake;");
document.writeln("");
